# texture_renderer

## Recommended Directory Structure
```
.
├── csv     (exported from RenderDoc)
│   └── 1234-0.csv              (output of the vertex shader, from RenderDoc)
├── final   (generated by scripts/finish.sh)
│   ├── 1234-0.obj              (OBJ file with UVs and reference to material file)
│   ├── 1234.mtl                (material file)
│   └── 1234.png                (texture)
├── obj     (generated by ...)
│   └── 1234-0.obj              (OBJ file generated from vertex shader output)
└── work    (exported from RenderDoc + generated by scripts/prepare.sh + generated by the main tool)
    └── 1234
        ├── model.obj -> ../../obj/1234-0.obj
        ├── model-uv.obj        (OBJ file with UVs, generated by Blender)
        ├── pipeline.json       (Pipeline description, from RenderDoc)
        ├── shader.frag         (Decompiled fragment shader)
        ├── shader.frag.spv     (Fragment shader, from RenderDoc)
        ├── texture.png         (texture)
        └── vertices.csv -> ../../csv/1234-0.csv
```

## Workflow
1. Make a RenderDoc capture of the environment you want to export.
2. Open the RenderDoc capture and select the corresponding render pass.
3. In RenderDoc, use `scripts/renderdoc/export_draws.py` to export the draw events to `csv/`
4. In RenderDoc, use `scripts/renderdoc/export_pipelines.py` to export the draw events to `work/`
5. Use `scripts/csv_to_obj.sh` to generate the OBJ files and undo the projection (from `csv/` to `obj/`)
6. use `scripts/prepare.sh` to decompile the shaders and to generate the UVs (affecting `work/`)
7. Use `scripts/run.sh` to generate the textures (affecting `work/`)
8. Export everything as a bunch of OBJs and MTLs (from `work/` to `final/`)

### Example Script invocations
5. `scripts/csv_to_obj.sh ./csv ./obj`
6. `scripts/prepare.sh ./work ./csv ./obj`
7. `scripts/run.sh ./work`
8. `scripts/finish.sh ./work ./obj ./final`
